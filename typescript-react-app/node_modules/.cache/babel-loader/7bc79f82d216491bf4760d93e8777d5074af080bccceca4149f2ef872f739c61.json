{"ast":null,"code":"var _jsxFileName = \"/Users/howardwang/Desktop/Turner Engineering/Software Product Design/reda-main/typescript-react-app/src/components/FolderBrowser/FolderBrowser.tsx\",\n  _s = $RefreshSig$();\n// ========================================================================\n// REDA EMC Testing Tool - Folder Browser Component\n// ========================================================================\n// Turner Engineering Corporation - Professional EMC Testing Support\n// \n// Folder navigation component for browsing and selecting files\n// ========================================================================\n\nimport React, { useState, useCallback } from 'react';\nimport { CsvService } from '../../services/CsvService';\nimport { NoiseAnalysisService } from '../../services/NoiseAnalysisService';\nimport { BAND_DEFINITIONS } from '../../constants';\nimport './FolderBrowser.css';\n\n// ========================================================================\n// INTERFACES\n// ========================================================================\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n// ========================================================================\n// FOLDER BROWSER COMPONENT\n// ========================================================================\n\nexport const FolderBrowser = ({\n  panelId,\n  title,\n  maxFiles = 8,\n  onFilesSelected\n}) => {\n  _s();\n  const [currentPath, setCurrentPath] = useState('');\n  const [folderContents, setFolderContents] = useState([]);\n  const [filteredContents, setFilteredContents] = useState([]);\n  const [selectedFiles, setSelectedFiles] = useState(new Set());\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [selectedBandFilter, setSelectedBandFilter] = useState('all');\n  const [sortBy, setSortBy] = useState('noisiness');\n  const [isAnalyzingNoise, setIsAnalyzingNoise] = useState(false);\n\n  // ========================================================================\n  // NOISINESS ANALYSIS\n  // ========================================================================\n\n  const batchAnalyzeNoisiness = useCallback(async items => {\n    const csvFiles = items.filter(item => item.isCSV && item.fileHandle);\n    if (csvFiles.length === 0) return;\n    setIsAnalyzingNoise(true);\n    console.log(`🔊 Analyzing band-relative noisiness for ${csvFiles.length} CSV files...`);\n\n    // Parse all CSV files first\n    const filesData = [];\n    for (const item of csvFiles) {\n      try {\n        const file = await item.fileHandle.getFile();\n        const parseResult = await CsvService.parseCsvFile(file);\n        if (parseResult.success && parseResult.data) {\n          // Detect band from frequency data if not already detected\n          let detectedBand = item.detectedBand;\n          if (!detectedBand) {\n            const frequencies = parseResult.data.map(point => point.frequency / 1e6);\n            const minFreq = Math.min(...frequencies);\n            const maxFreq = Math.max(...frequencies);\n            detectedBand = CsvService.detectBandFromFrequencyRange(minFreq, maxFreq);\n          }\n          filesData.push({\n            filename: item.name,\n            data: parseResult.data,\n            band: detectedBand || 'Unknown',\n            item\n          });\n        }\n      } catch (error) {\n        console.warn(`Failed to parse ${item.name}:`, error);\n      }\n    }\n    if (filesData.length === 0) {\n      setIsAnalyzingNoise(false);\n      return;\n    }\n\n    // Use band-relative noisiness analysis\n    const analyses = NoiseAnalysisService.calculateBandRelativeNoisiness(filesData);\n\n    // Update items with analysis results\n    const updatedItems = [...items];\n    analyses.forEach(analysis => {\n      const fileData = filesData.find(fd => fd.filename === analysis.filename);\n      if (fileData) {\n        const itemIndex = updatedItems.findIndex(ui => ui.path === fileData.item.path);\n        if (itemIndex >= 0) {\n          updatedItems[itemIndex] = {\n            ...updatedItems[itemIndex],\n            noisinessAnalysis: analysis,\n            detectedBand: fileData.band // Update band if it was detected\n          };\n        }\n      }\n    });\n    setFolderContents(updatedItems);\n    setIsAnalyzingNoise(false);\n    console.log(`✅ Band-relative noisiness analysis complete for ${csvFiles.length} files`);\n    console.log(`📊 Results: Files now ranked 1-10 within their respective bands (1=quietest, 10=noisiest)`);\n  }, []);\n\n  // ========================================================================\n  // FILTERING AND BAND DETECTION\n  // ========================================================================\n\n  const applyFilters = useCallback(allItems => {\n    let filtered = [...allItems];\n\n    // Band filter (only CSV files, no folders to worry about)\n    if (selectedBandFilter !== 'all') {\n      filtered = filtered.filter(item => item.detectedBand === selectedBandFilter);\n    }\n\n    // Sort\n    filtered.sort((a, b) => {\n      if (sortBy === 'noisiness') {\n        var _a$noisinessAnalysis, _b$noisinessAnalysis;\n        const aNoise = ((_a$noisinessAnalysis = a.noisinessAnalysis) === null || _a$noisinessAnalysis === void 0 ? void 0 : _a$noisinessAnalysis.noisinessIndex) || 0;\n        const bNoise = ((_b$noisinessAnalysis = b.noisinessAnalysis) === null || _b$noisinessAnalysis === void 0 ? void 0 : _b$noisinessAnalysis.noisinessIndex) || 0;\n        return bNoise - aNoise; // Highest first\n      }\n\n      // Default: sort by name\n      return a.name.localeCompare(b.name);\n    });\n    setFilteredContents(filtered);\n  }, [selectedBandFilter, sortBy]);\n\n  // Apply filters whenever band filter, sort option, or folder contents change\n  React.useEffect(() => {\n    applyFilters(folderContents);\n  }, [folderContents, selectedBandFilter, sortBy, applyFilters]);\n\n  // ========================================================================\n  // FOLDER NAVIGATION\n  // ========================================================================\n\n  const loadFolderContents = useCallback(async dirHandle => {\n    setIsLoading(true);\n    setError('');\n    const items = [];\n    try {\n      for await (const [name, handle] of dirHandle.entries()) {\n        // Only process files, skip folders\n        if (handle.kind !== 'file') {\n          continue;\n        }\n\n        // Only include CSV files\n        const isCSV = CsvService.isValidCsvFile({\n          name\n        });\n        if (!isCSV) {\n          continue;\n        }\n        const item = {\n          name,\n          path: name,\n          // Simplified - just the filename\n          type: 'file',\n          isCSV: true,\n          fileHandle: handle\n        };\n        try {\n          const file = await handle.getFile();\n          item.size = file.size;\n          item.modified = new Date(file.lastModified);\n\n          // Detect band for CSV files\n          const bandFromFilename = CsvService.detectBandFromFilename(name);\n          if (bandFromFilename) {\n            item.detectedBand = bandFromFilename;\n            item.bandConfidence = 'high';\n          } else {\n            item.detectedBand = null;\n            item.bandConfidence = 'low';\n          }\n        } catch (err) {\n          // Skip files we can't access\n          continue;\n        }\n        items.push(item);\n      }\n\n      // Simple alphabetical sort\n      items.sort((a, b) => a.name.localeCompare(b.name));\n      setFolderContents(items);\n      setFilteredContents(items); // No filtering needed initially\n\n      // Start noisiness analysis for CSV files in the background\n      setTimeout(() => batchAnalyzeNoisiness(items), 100);\n    } catch (error) {\n      setError('Failed to read folder contents.');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [batchAnalyzeNoisiness]);\n  const loadFolderContentsFromFiles = useCallback(files => {\n    setIsLoading(true);\n    setError('');\n    const items = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n\n      // Only include CSV files\n      const isCSV = CsvService.isValidCsvFile(file);\n      if (!isCSV) {\n        continue;\n      }\n      const item = {\n        name: file.name,\n        path: file.name,\n        // Simplified - just the filename\n        type: 'file',\n        size: file.size,\n        modified: new Date(file.lastModified),\n        isCSV: true\n      };\n\n      // Detect band for CSV files\n      const bandFromFilename = CsvService.detectBandFromFilename(file.name);\n      if (bandFromFilename) {\n        item.detectedBand = bandFromFilename;\n        item.bandConfidence = 'high';\n      } else {\n        item.detectedBand = null;\n        item.bandConfidence = 'low';\n      }\n      items.push(item);\n    }\n\n    // Simple alphabetical sort\n    items.sort((a, b) => a.name.localeCompare(b.name));\n    setFolderContents(items);\n    setFilteredContents(items); // No filtering needed initially\n    setIsLoading(false);\n  }, []);\n  const openFolderDialog = useCallback(async () => {\n    try {\n      // Use the File System Access API for modern browsers\n      if ('showDirectoryPicker' in window) {\n        const dirHandle = await window.showDirectoryPicker();\n        const path = dirHandle.name;\n        setCurrentPath(path);\n        await loadFolderContents(dirHandle);\n      } else {\n        // Fallback: use input element\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.webkitdirectory = true;\n        input.multiple = true;\n        input.onchange = e => {\n          const files = e.target.files;\n          if (files && files.length > 0) {\n            const firstFile = files[0];\n            const pathParts = firstFile.webkitRelativePath.split('/');\n            const folderName = pathParts[0];\n            setCurrentPath(folderName);\n            loadFolderContentsFromFiles(files);\n          }\n        };\n        input.click();\n      }\n    } catch (error) {\n      if (error.name !== 'AbortError') {\n        setError('Failed to open folder. Please try again.');\n      }\n    }\n  }, [loadFolderContents, loadFolderContentsFromFiles]);\n\n  // ========================================================================\n  // FILE SELECTION\n  // ========================================================================\n\n  const toggleFileSelection = useCallback((path, itemBand) => {\n    setSelectedFiles(prev => {\n      const newSelection = new Set();\n      if (prev.has(path)) {\n        // Deselecting the currently selected file - clear everything\n        newSelection.clear();\n        console.log(`🗑️ Deselected file: ${path}`);\n      } else {\n        // Selecting a new file - replace any previous selection\n        newSelection.clear(); // Clear any previous selections\n        newSelection.add(path); // Add only the new file\n\n        if (itemBand) {\n          console.log(`🔄 Selected new file: ${path} (${itemBand} band) - replacing any previous selection`);\n        } else {\n          console.log(`🔄 Selected new file: ${path} (Unknown band) - replacing any previous selection`);\n        }\n        setError(''); // Clear any previous errors\n      }\n\n      // Always trigger file loading when selection changes (including when clearing)\n      setTimeout(() => {\n        const selectedItems = filteredContents.filter(item => newSelection.has(item.path) && item.type === 'file' && item.isCSV);\n\n        // Always call the callback, even when no files are selected (to clear the plot)\n        if (onFilesSelected) {\n          onFilesSelected(selectedItems);\n        }\n      }, 100); // Small delay to ensure state updates are complete\n\n      return newSelection;\n    });\n  }, [filteredContents, onFilesSelected]);\n\n  // ========================================================================\n  // CLEAR SELECTION\n  // ========================================================================\n\n  const clearSelection = useCallback(() => {\n    setSelectedFiles(new Set());\n    setError('');\n\n    // Notify parent that no files are selected\n    if (onFilesSelected) {\n      onFilesSelected([]);\n    }\n  }, [onFilesSelected]);\n\n  // ========================================================================\n  // RENDER HELPERS\n  // ========================================================================\n\n  // const renderPathBreadcrumb = () => {\n  //   // Removed - not using breadcrumb navigation anymore\n  // };\n\n  const renderFolderItem = item => {\n    const isSelected = selectedFiles.has(item.path);\n    // All items are CSV files and selectable - no need for isSelectable variable\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `folder-item file ${isSelected ? 'selected' : ''} selectable`,\n      onClick: () => toggleFileSelection(item.path, item.detectedBand),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item-name\",\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item-meta\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"band-info\",\n            children: [item.detectedBand && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `band-indicator ${item.bandConfidence}`,\n              children: item.detectedBand\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 17\n            }, this), !item.detectedBand && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"band-indicator unknown\",\n              children: \"Unknown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), item.noisinessAnalysis && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"noisiness-info\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"noisiness-indicator\",\n              style: {\n                color: NoiseAnalysisService.getNoisinessColor(item.noisinessAnalysis.noisinessIndex)\n              },\n              title: `Noisiness: ${item.noisinessAnalysis.noisinessIndex}/10 (${NoiseAnalysisService.getNoisinessDescription(item.noisinessAnalysis.noisinessIndex)})`,\n              children: item.noisinessAnalysis.noisinessIndex\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this), !item.noisinessAnalysis && isAnalyzingNoise && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"noisiness-info\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"noisiness-loading\",\n              children: \"...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selection-indicator\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: isSelected,\n          onChange: () => toggleFileSelection(item.path, item.detectedBand),\n          onClick: e => e.stopPropagation()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }, this)]\n    }, item.path, true, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this);\n  };\n\n  // ========================================================================\n  // MAIN RENDER\n  // ========================================================================\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"folder-browser\",\n    \"data-panel-id\": panelId,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"browser-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        onClick: !isLoading ? openFolderDialog : undefined,\n        style: {\n          cursor: !isLoading ? 'pointer' : 'default',\n          userSelect: 'none',\n          color: !currentPath ? 'inherit' : 'inherit',\n          transition: 'all 0.2s ease'\n        },\n        title: !currentPath ? 'Click to open folder' : `Current folder: ${currentPath}. Click to change.`,\n        onMouseEnter: e => {\n          if (!isLoading) {\n            e.currentTarget.style.opacity = '0.7';\n          }\n        },\n        onMouseLeave: e => {\n          e.currentTarget.style.opacity = '1';\n        },\n        children: [title, currentPath ? ` - ${currentPath}` : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this), currentPath && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"browser-controls\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: openFolderDialog,\n          className: \"open-folder-btn\",\n          disabled: isLoading,\n          children: \"Change Folder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 9\n    }, this), currentPath && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: `band-filter-${panelId}`,\n            className: \"filter-label\",\n            children: \"Band Filter:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: `band-filter-${panelId}`,\n            value: selectedBandFilter,\n            onChange: e => {\n              setSelectedBandFilter(e.target.value);\n              applyFilters(folderContents);\n            },\n            className: \"band-filter-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Bands\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this), Object.entries(BAND_DEFINITIONS).map(([bandType, definition]) => {\n              const count = folderContents.filter(item => item.detectedBand === bandType).length;\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: bandType,\n                children: [bandType, \": \", definition.range, \" (\", count, \" files)\"]\n              }, bandType, true, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: `sort-filter-${panelId}`,\n            className: \"filter-label\",\n            children: \"Sort by:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: `sort-filter-${panelId}`,\n            value: sortBy,\n            onChange: e => {\n              setSortBy(e.target.value);\n              applyFilters(folderContents);\n            },\n            className: \"sort-filter-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"noisiness\",\n              children: \"Noisiness (High\\u2192Low)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"name\",\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"action-section\",\n          children: [isAnalyzingNoise && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"analysis-status\",\n            children: \"Analyzing...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearSelection,\n            disabled: selectedFiles.size === 0,\n            className: \"clear-all-btn\",\n            children: selectedFiles.size > 0 ? 'Clear Selection' : 'Clear All'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"folder-contents\",\n      children: !currentPath ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-state\",\n        onClick: openFolderDialog,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Select Your \", title, \" Folder\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-subtitle\",\n          children: [\"Click here to browse and select CSV files for \", panelId === 'dataset-a' ? 'primary' : 'comparison', \" analysis\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 11\n      }, this) : isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading folder contents...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 11\n      }, this) : filteredContents.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-folder\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: selectedBandFilter !== 'all' ? `No CSV files found for band ${selectedBandFilter}` : 'No CSV files found'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 13\n        }, this), selectedBandFilter !== 'all' && folderContents.length > 0 && /*#__PURE__*/_jsxDEV(\"small\", {\n          children: \"Try selecting \\\"All Bands\\\" to see all files\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"items-list\",\n        children: filteredContents.map(renderFolderItem)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 434,\n    columnNumber: 5\n  }, this);\n};\n_s(FolderBrowser, \"ltP1w6ubH/vMvzQigzppULomsuk=\");\n_c = FolderBrowser;\nexport default FolderBrowser;\nvar _c;\n$RefreshReg$(_c, \"FolderBrowser\");","map":{"version":3,"names":["React","useState","useCallback","CsvService","NoiseAnalysisService","BAND_DEFINITIONS","jsxDEV","_jsxDEV","Fragment","_Fragment","FolderBrowser","panelId","title","maxFiles","onFilesSelected","_s","currentPath","setCurrentPath","folderContents","setFolderContents","filteredContents","setFilteredContents","selectedFiles","setSelectedFiles","Set","isLoading","setIsLoading","error","setError","selectedBandFilter","setSelectedBandFilter","sortBy","setSortBy","isAnalyzingNoise","setIsAnalyzingNoise","batchAnalyzeNoisiness","items","csvFiles","filter","item","isCSV","fileHandle","length","console","log","filesData","file","getFile","parseResult","parseCsvFile","success","data","detectedBand","frequencies","map","point","frequency","minFreq","Math","min","maxFreq","max","detectBandFromFrequencyRange","push","filename","name","band","warn","analyses","calculateBandRelativeNoisiness","updatedItems","forEach","analysis","fileData","find","fd","itemIndex","findIndex","ui","path","noisinessAnalysis","applyFilters","allItems","filtered","sort","a","b","_a$noisinessAnalysis","_b$noisinessAnalysis","aNoise","noisinessIndex","bNoise","localeCompare","useEffect","loadFolderContents","dirHandle","handle","entries","kind","isValidCsvFile","type","size","modified","Date","lastModified","bandFromFilename","detectBandFromFilename","bandConfidence","err","setTimeout","loadFolderContentsFromFiles","files","i","openFolderDialog","window","showDirectoryPicker","input","document","createElement","webkitdirectory","multiple","onchange","e","target","firstFile","pathParts","webkitRelativePath","split","folderName","click","toggleFileSelection","itemBand","prev","newSelection","has","clear","add","selectedItems","clearSelection","renderFolderItem","isSelected","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","getNoisinessColor","getNoisinessDescription","checked","onChange","stopPropagation","undefined","cursor","userSelect","transition","onMouseEnter","currentTarget","opacity","onMouseLeave","disabled","htmlFor","id","value","Object","bandType","definition","count","range","_c","$RefreshReg$"],"sources":["/Users/howardwang/Desktop/Turner Engineering/Software Product Design/reda-main/typescript-react-app/src/components/FolderBrowser/FolderBrowser.tsx"],"sourcesContent":["// ========================================================================\n// REDA EMC Testing Tool - Folder Browser Component\n// ========================================================================\n// Turner Engineering Corporation - Professional EMC Testing Support\n// \n// Folder navigation component for browsing and selecting files\n// ========================================================================\n\nimport React, { useState, useCallback } from 'react';\nimport { CsvService } from '../../services/CsvService';\nimport { NoiseAnalysisService, NoiseAnalysisResult } from '../../services/NoiseAnalysisService';\nimport { BandType, CsvDataPoint } from '../../types';\nimport { BAND_DEFINITIONS } from '../../constants';\nimport './FolderBrowser.css';\n\n// ========================================================================\n// INTERFACES\n// ========================================================================\n\ninterface FolderItem {\n  name: string;\n  path: string;\n  type: 'file' | 'folder';\n  size?: number;\n  modified?: Date;\n  isCSV?: boolean;\n  detectedBand?: BandType | null;\n  bandConfidence?: 'high' | 'medium' | 'low';\n  fileHandle?: any; // File handle for File System Access API\n  noisinessAnalysis?: NoiseAnalysisResult; // Noisiness analysis data\n}\n\ninterface FolderBrowserProps {\n  panelId: string;\n  title: string;\n  maxFiles?: number;\n  onFilesSelected?: (files: FolderItem[]) => void;\n}\n\n// ========================================================================\n// FOLDER BROWSER COMPONENT\n// ========================================================================\n\nexport const FolderBrowser: React.FC<FolderBrowserProps> = ({\n  panelId,\n  title,\n  maxFiles = 8,\n  onFilesSelected\n}) => {\n  const [currentPath, setCurrentPath] = useState<string>('');\n  const [folderContents, setFolderContents] = useState<FolderItem[]>([]);\n  const [filteredContents, setFilteredContents] = useState<FolderItem[]>([]);\n  const [selectedFiles, setSelectedFiles] = useState<Set<string>>(new Set());\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string>('');\n  const [selectedBandFilter, setSelectedBandFilter] = useState<BandType | 'all'>('all');\n  const [sortBy, setSortBy] = useState<'name' | 'noisiness'>('noisiness');\n  const [isAnalyzingNoise, setIsAnalyzingNoise] = useState<boolean>(false);\n\n  // ========================================================================\n  // NOISINESS ANALYSIS\n  // ========================================================================\n\n  const batchAnalyzeNoisiness = useCallback(async (items: FolderItem[]) => {\n    const csvFiles = items.filter(item => item.isCSV && item.fileHandle);\n    if (csvFiles.length === 0) return;\n\n    setIsAnalyzingNoise(true);\n    console.log(`🔊 Analyzing band-relative noisiness for ${csvFiles.length} CSV files...`);\n\n    // Parse all CSV files first\n    const filesData: Array<{ filename: string; data: CsvDataPoint[]; band?: string; item: FolderItem }> = [];\n    \n    for (const item of csvFiles) {\n      try {\n        const file = await item.fileHandle!.getFile();\n        const parseResult = await CsvService.parseCsvFile(file);\n        \n        if (parseResult.success && parseResult.data) {\n          // Detect band from frequency data if not already detected\n          let detectedBand = item.detectedBand;\n          if (!detectedBand) {\n            const frequencies = parseResult.data.map(point => point.frequency / 1e6);\n            const minFreq = Math.min(...frequencies);\n            const maxFreq = Math.max(...frequencies);\n            detectedBand = CsvService.detectBandFromFrequencyRange(minFreq, maxFreq);\n          }\n          \n          filesData.push({\n            filename: item.name,\n            data: parseResult.data,\n            band: detectedBand || 'Unknown',\n            item\n          });\n        }\n      } catch (error) {\n        console.warn(`Failed to parse ${item.name}:`, error);\n      }\n    }\n    \n    if (filesData.length === 0) {\n      setIsAnalyzingNoise(false);\n      return;\n    }\n\n    // Use band-relative noisiness analysis\n    const analyses = NoiseAnalysisService.calculateBandRelativeNoisiness(filesData);\n    \n    // Update items with analysis results\n    const updatedItems = [...items];\n    analyses.forEach(analysis => {\n      const fileData = filesData.find(fd => fd.filename === analysis.filename);\n      if (fileData) {\n        const itemIndex = updatedItems.findIndex(ui => ui.path === fileData.item.path);\n        if (itemIndex >= 0) {\n          updatedItems[itemIndex] = { \n            ...updatedItems[itemIndex], \n            noisinessAnalysis: analysis,\n            detectedBand: fileData.band as any // Update band if it was detected\n          };\n        }\n      }\n    });\n    \n    setFolderContents(updatedItems);\n    setIsAnalyzingNoise(false);\n    \n    console.log(`✅ Band-relative noisiness analysis complete for ${csvFiles.length} files`);\n    console.log(`📊 Results: Files now ranked 1-10 within their respective bands (1=quietest, 10=noisiest)`);\n  }, []);\n\n  // ========================================================================\n  // FILTERING AND BAND DETECTION\n  // ========================================================================\n\n  const applyFilters = useCallback((allItems: FolderItem[]) => {\n    let filtered = [...allItems];\n    \n    // Band filter (only CSV files, no folders to worry about)\n    if (selectedBandFilter !== 'all') {\n      filtered = filtered.filter(item => item.detectedBand === selectedBandFilter);\n    }\n    \n    // Sort\n    filtered.sort((a, b) => {\n      if (sortBy === 'noisiness') {\n        const aNoise = a.noisinessAnalysis?.noisinessIndex || 0;\n        const bNoise = b.noisinessAnalysis?.noisinessIndex || 0;\n        return bNoise - aNoise; // Highest first\n      }\n      \n      // Default: sort by name\n      return a.name.localeCompare(b.name);\n    });\n\n    setFilteredContents(filtered);\n  }, [selectedBandFilter, sortBy]);\n\n  // Apply filters whenever band filter, sort option, or folder contents change\n  React.useEffect(() => {\n    applyFilters(folderContents);\n  }, [folderContents, selectedBandFilter, sortBy, applyFilters]);\n\n  // ========================================================================\n  // FOLDER NAVIGATION\n  // ========================================================================\n\n  const loadFolderContents = useCallback(async (dirHandle: any) => {\n    setIsLoading(true);\n    setError('');\n    const items: FolderItem[] = [];\n\n    try {\n      for await (const [name, handle] of dirHandle.entries()) {\n        // Only process files, skip folders\n        if (handle.kind !== 'file') {\n          continue;\n        }\n        \n        // Only include CSV files\n        const isCSV = CsvService.isValidCsvFile({ name } as File);\n        if (!isCSV) {\n          continue;\n        }\n\n        const item: FolderItem = {\n          name,\n          path: name, // Simplified - just the filename\n          type: 'file',\n          isCSV: true,\n          fileHandle: handle\n        };\n\n        try {\n          const file = await handle.getFile();\n          item.size = file.size;\n          item.modified = new Date(file.lastModified);\n          \n          // Detect band for CSV files\n          const bandFromFilename = CsvService.detectBandFromFilename(name);\n          if (bandFromFilename) {\n            item.detectedBand = bandFromFilename;\n            item.bandConfidence = 'high';\n          } else {\n            item.detectedBand = null;\n            item.bandConfidence = 'low';\n          }\n        } catch (err) {\n          // Skip files we can't access\n          continue;\n        }\n\n        items.push(item);\n      }\n\n      // Simple alphabetical sort\n      items.sort((a, b) => a.name.localeCompare(b.name));\n\n      setFolderContents(items);\n      setFilteredContents(items); // No filtering needed initially\n      \n      // Start noisiness analysis for CSV files in the background\n      setTimeout(() => batchAnalyzeNoisiness(items), 100);\n    } catch (error) {\n      setError('Failed to read folder contents.');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [batchAnalyzeNoisiness]);\n\n  const loadFolderContentsFromFiles = useCallback((files: FileList) => {\n    setIsLoading(true);\n    setError('');\n    const items: FolderItem[] = [];\n\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      \n      // Only include CSV files\n      const isCSV = CsvService.isValidCsvFile(file);\n      if (!isCSV) {\n        continue;\n      }\n\n      const item: FolderItem = {\n        name: file.name,\n        path: file.name, // Simplified - just the filename\n        type: 'file',\n        size: file.size,\n        modified: new Date(file.lastModified),\n        isCSV: true\n      };\n\n      // Detect band for CSV files\n      const bandFromFilename = CsvService.detectBandFromFilename(file.name);\n      if (bandFromFilename) {\n        item.detectedBand = bandFromFilename;\n        item.bandConfidence = 'high';\n      } else {\n        item.detectedBand = null;\n        item.bandConfidence = 'low';\n      }\n\n      items.push(item);\n    }\n\n    // Simple alphabetical sort\n    items.sort((a, b) => a.name.localeCompare(b.name));\n\n    setFolderContents(items);\n    setFilteredContents(items); // No filtering needed initially\n    setIsLoading(false);\n  }, []);\n\n  const openFolderDialog = useCallback(async () => {\n    try {\n      // Use the File System Access API for modern browsers\n      if ('showDirectoryPicker' in window) {\n        const dirHandle = await (window as any).showDirectoryPicker();\n        const path = dirHandle.name;\n        setCurrentPath(path);\n        await loadFolderContents(dirHandle);\n      } else {\n        // Fallback: use input element\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.webkitdirectory = true;\n        input.multiple = true;\n        \n        input.onchange = (e) => {\n          const files = (e.target as HTMLInputElement).files;\n          if (files && files.length > 0) {\n            const firstFile = files[0];\n            const pathParts = firstFile.webkitRelativePath.split('/');\n            const folderName = pathParts[0];\n            setCurrentPath(folderName);\n            loadFolderContentsFromFiles(files);\n          }\n        };\n        \n        input.click();\n      }\n    } catch (error) {\n      if ((error as Error).name !== 'AbortError') {\n        setError('Failed to open folder. Please try again.');\n      }\n    }\n  }, [loadFolderContents, loadFolderContentsFromFiles]);\n\n  // ========================================================================\n  // FILE SELECTION\n  // ========================================================================\n\n  const toggleFileSelection = useCallback((path: string, itemBand?: BandType | null) => {\n    setSelectedFiles(prev => {\n      const newSelection = new Set<string>();\n      \n      if (prev.has(path)) {\n        // Deselecting the currently selected file - clear everything\n        newSelection.clear();\n        console.log(`🗑️ Deselected file: ${path}`);\n      } else {\n        // Selecting a new file - replace any previous selection\n        newSelection.clear(); // Clear any previous selections\n        newSelection.add(path); // Add only the new file\n        \n        if (itemBand) {\n          console.log(`🔄 Selected new file: ${path} (${itemBand} band) - replacing any previous selection`);\n        } else {\n          console.log(`🔄 Selected new file: ${path} (Unknown band) - replacing any previous selection`);\n        }\n        \n        setError(''); // Clear any previous errors\n      }\n\n      // Always trigger file loading when selection changes (including when clearing)\n      setTimeout(() => {\n        const selectedItems = filteredContents.filter(item => \n          newSelection.has(item.path) && item.type === 'file' && item.isCSV\n        );\n        \n        // Always call the callback, even when no files are selected (to clear the plot)\n        if (onFilesSelected) {\n          onFilesSelected(selectedItems);\n        }\n      }, 100); // Small delay to ensure state updates are complete\n      \n      return newSelection;\n    });\n  }, [filteredContents, onFilesSelected]);\n\n  // ========================================================================\n  // CLEAR SELECTION\n  // ========================================================================\n\n  const clearSelection = useCallback(() => {\n    setSelectedFiles(new Set());\n    setError('');\n    \n    // Notify parent that no files are selected\n    if (onFilesSelected) {\n      onFilesSelected([]);\n    }\n  }, [onFilesSelected]);\n\n  // ========================================================================\n  // RENDER HELPERS\n  // ========================================================================\n\n  // const renderPathBreadcrumb = () => {\n  //   // Removed - not using breadcrumb navigation anymore\n  // };\n\n  const renderFolderItem = (item: FolderItem) => {\n    const isSelected = selectedFiles.has(item.path);\n    // All items are CSV files and selectable - no need for isSelectable variable\n\n    return (\n      <div\n        key={item.path}\n        className={`folder-item file ${isSelected ? 'selected' : ''} selectable`}\n        onClick={() => toggleFileSelection(item.path, item.detectedBand)}\n      >\n        <div className=\"item-details\">\n          <div className=\"item-name\">{item.name}</div>\n          <div className=\"item-meta\">\n            <div className=\"band-info\">\n              {item.detectedBand && (\n                <span className={`band-indicator ${item.bandConfidence}`}>\n                  {item.detectedBand}\n                </span>\n              )}\n              {!item.detectedBand && (\n                <span className=\"band-indicator unknown\">\n                  Unknown\n                </span>\n              )}\n            </div>\n            {item.noisinessAnalysis && (\n              <div className=\"noisiness-info\">\n                <span \n                  className=\"noisiness-indicator\"\n                  style={{ color: NoiseAnalysisService.getNoisinessColor(item.noisinessAnalysis.noisinessIndex) }}\n                  title={`Noisiness: ${item.noisinessAnalysis.noisinessIndex}/10 (${NoiseAnalysisService.getNoisinessDescription(item.noisinessAnalysis.noisinessIndex)})`}\n                >\n                  {item.noisinessAnalysis.noisinessIndex}\n                </span>\n              </div>\n            )}\n            {!item.noisinessAnalysis && isAnalyzingNoise && (\n              <div className=\"noisiness-info\">\n                <span className=\"noisiness-loading\">...</span>\n              </div>\n            )}\n          </div>\n        </div>\n        <div className=\"selection-indicator\">\n          <input \n            type=\"checkbox\" \n            checked={isSelected} \n            onChange={() => toggleFileSelection(item.path, item.detectedBand)}\n            onClick={(e) => e.stopPropagation()}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  // ========================================================================\n  // MAIN RENDER\n  // ========================================================================\n\n  return (\n    <div className=\"folder-browser\" data-panel-id={panelId}>\n      <div className=\"browser-header\">\n        <h3 \n          onClick={!isLoading ? openFolderDialog : undefined}\n          style={{ \n            cursor: !isLoading ? 'pointer' : 'default',\n            userSelect: 'none',\n            color: !currentPath ? 'inherit' : 'inherit',\n            transition: 'all 0.2s ease'\n          }}\n          title={!currentPath ? 'Click to open folder' : `Current folder: ${currentPath}. Click to change.`}\n          onMouseEnter={(e) => {\n            if (!isLoading) {\n              e.currentTarget.style.opacity = '0.7';\n            }\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.opacity = '1';\n          }}\n        >\n          {title}\n          {currentPath ? ` - ${currentPath}` : ''}\n        </h3>\n        {currentPath && (\n          <div className=\"browser-controls\">\n            <button \n              onClick={openFolderDialog}\n              className=\"open-folder-btn\"\n              disabled={isLoading}\n            >\n              Change Folder\n            </button>\n          </div>\n        )}\n      </div>\n\n      {error && (\n        <div className=\"error-message\">\n          {error}\n        </div>\n      )}\n\n      {currentPath && (\n        <>\n          {/* {renderPathBreadcrumb()} - Removed for cleaner UI */}\n          \n          {/* Filter and Sort Controls */}\n          <div className=\"filter-controls\">\n            <div className=\"filter-section\">\n              <label htmlFor={`band-filter-${panelId}`} className=\"filter-label\">\n                Band Filter:\n              </label>\n              <select\n                id={`band-filter-${panelId}`}\n                value={selectedBandFilter}\n                onChange={(e) => {\n                  setSelectedBandFilter(e.target.value as BandType | 'all');\n                  applyFilters(folderContents);\n                }}\n                className=\"band-filter-select\"\n              >\n                <option value=\"all\">All Bands</option>\n                {Object.entries(BAND_DEFINITIONS).map(([bandType, definition]) => {\n                  const count = folderContents.filter(item => item.detectedBand === bandType).length;\n                  return (\n                    <option key={bandType} value={bandType}>\n                      {bandType}: {definition.range} ({count} files)\n                    </option>\n                  );\n                })}\n              </select>\n            </div>\n            <div className=\"filter-section\">\n              <label htmlFor={`sort-filter-${panelId}`} className=\"filter-label\">\n                Sort by:\n              </label>\n              <select\n                id={`sort-filter-${panelId}`}\n                value={sortBy}\n                onChange={(e) => {\n                  setSortBy(e.target.value as 'name' | 'noisiness');\n                  applyFilters(folderContents);\n                }}\n                className=\"sort-filter-select\"\n              >\n                <option value=\"noisiness\">Noisiness (High→Low)</option>\n                <option value=\"name\">Name</option>\n              </select>\n            </div>\n            <div className=\"action-section\">\n              {isAnalyzingNoise && (\n                <span className=\"analysis-status\">\n                  Analyzing...\n                </span>\n              )}\n              <button \n                onClick={clearSelection}\n                disabled={selectedFiles.size === 0}\n                className=\"clear-all-btn\"\n              >\n                {selectedFiles.size > 0 ? 'Clear Selection' : 'Clear All'}\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n\n      <div className=\"folder-contents\">\n        {!currentPath ? (\n          <div className=\"empty-state\" onClick={openFolderDialog}>\n            <div className=\"empty-icon\"></div>\n            <p>Select Your {title} Folder</p>\n            <div className=\"empty-subtitle\">Click here to browse and select CSV files for {panelId === 'dataset-a' ? 'primary' : 'comparison'} analysis</div>\n          </div>\n        ) : isLoading ? (\n          <div className=\"loading-state\">\n            <div className=\"spinner\">Loading...</div>\n            <p>Loading folder contents...</p>\n          </div>\n        ) : filteredContents.length === 0 ? (\n          <div className=\"empty-folder\">\n            <div className=\"empty-icon\"></div>\n            <p>{selectedBandFilter !== 'all' ? `No CSV files found for band ${selectedBandFilter}` : 'No CSV files found'}</p>\n            {selectedBandFilter !== 'all' && folderContents.length > 0 && (\n              <small>Try selecting \"All Bands\" to see all files</small>\n            )}\n          </div>\n        ) : (\n          <div className=\"items-list\">\n            {filteredContents.map(renderFolderItem)}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default FolderBrowser; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}